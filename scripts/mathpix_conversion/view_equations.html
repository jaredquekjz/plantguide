<!DOCTYPE html>
<html>
<head>
    <title>Equation Viewer for MMD Papers</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        .instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .equation-display {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .inline-eq {
            background: #fff3e0;
            padding: 5px 10px;
            margin: 5px;
            display: inline-block;
            border-radius: 4px;
        }
        textarea {
            width: 100%;
            height: 150px;
            font-family: monospace;
            font-size: 14px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        button {
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
        }
        button:hover {
            background: #45a049;
        }
        #output {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>ðŸ”¬ Mathpix Equation Viewer</h1>
    
    <div class="instructions">
        <h3>ðŸ“š How to use:</h3>
        <ol>
            <li>Open any .mmd file from Papers/mmd/ folder</li>
            <li>Copy equations (with $ delimiters) and paste below</li>
            <li>Click "Render Equations" to see them properly formatted</li>
        </ol>
        <p><strong>Supports:</strong> Inline math $...$, display math $$...$$, and LaTeX \[...\] notation</p>
    </div>
    
    <h3>Paste MMD content with equations:</h3>
    <textarea id="mmd-input" placeholder="Paste your MMD content here. For example:
The equation $E = mc^2$ shows energy-mass equivalence.

Or a display equation:
$$\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}$$"></textarea>
    
    <button onclick="renderEquations()">Render Equations</button>
    
    <div id="output"></div>
    
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true
            }
        };
        
        function renderEquations() {
            const input = document.getElementById('mmd-input').value;
            const output = document.getElementById('output');
            
            // Process the content
            let processed = input;
            
            // Convert MMD to HTML-friendly format
            processed = processed.replace(/\n\n/g, '</p><p>');
            processed = '<p>' + processed + '</p>';
            
            // Display equations get their own div
            processed = processed.replace(/\$\$(.*?)\$\$/gs, (match, eq) => {
                return '<div class="equation-display">$$' + eq + '$$</div>';
            });
            
            // Inline equations get highlighted
            processed = processed.replace(/\$([^$]+)\$/g, (match, eq) => {
                return '<span class="inline-eq">$' + eq + '$</span>';
            });
            
            output.innerHTML = processed;
            
            // Tell MathJax to process the new content
            MathJax.typesetPromise([output]).then(() => {
                console.log('Equations rendered!');
            }).catch((e) => console.log(e));
        }
        
        // Example equations on load
        document.getElementById('mmd-input').value = `Here are some example equations from your papers:

Inline equation: The generalized soil fertility $F_G$ with correlation $r=0.98$

Display equation from SEM paper:
$$p\\left(V_{i}, \\ldots, V_{n}\\right)=\\prod_{i=1}^{k} p_{i}\\left(\\boldsymbol{D}_{i} \\mid \\boldsymbol{e}_{i}\\right)$$

Fisher's C statistic:
$$C=-2 \\sum_{i=1}^{k} \\ln \\left(p_{i}\\right)$$

Matrix notation: $\\boldsymbol{\\theta}_{M}$ and path coefficients $\\rightarrow$`;
        
        // Auto-render on load
        window.addEventListener('load', () => {
            setTimeout(renderEquations, 500);
        });
    </script>
</body>
</html>